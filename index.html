<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Smoke Docs Index</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.cyborg.css">

</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top navbar-inverse">
		<div class="navbar-inner">
			<a class="brand" href="index.html">Smoke Docs</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="module-Ad.html">Ad</a>
						</li>
						
						<li>
							<a href="module-api.html">api</a>
						</li>
						
						<li>
							<a href="module-edit_api.html">edit_api</a>
						</li>
						
						<li>
							<a href="module-edit_views.html">edit_views</a>
						</li>
						
						<li>
							<a href="module-editor.html">editor</a>
						</li>
						
						<li>
							<a href="module-main.html">main</a>
						</li>
						
						<li>
							<a href="module-markdown.html">markdown</a>
						</li>
						
						<li>
							<a href="module-render.html">render</a>
						</li>
						
						<li>
							<a href="module-router.html">router</a>
						</li>
						
						<li>
							<a href="module-views.html">views</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="module-api.Component.html">api.Component</a>
						</li>
						
						<li>
							<a href="module-api.Data.html">api.Data</a>
						</li>
						
						<li>
							<a href="module-edit_api.Component.html">edit_api.Component</a>
						</li>
						
						<li>
							<a href="module-edit_api.Data.html">edit_api.Data</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
		<div class="span8">
			
				<div id="main">
					


	
	<span class="page-title">Index</span>
	
	












	
	





    <section class="readme-section">
        <article><h1>oh sweet jesus don't use me i'm very much in a state of development</h1>
<p><strong>Smoke</strong> is a new front end for MotherJones.com.</p>
<h2>Installation</h2>
<p>To work on self locally, you'll need:
<em> Node - The package manager installation instructions on <a href="https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager">here</a> managed to work for us.
</em> <a href="https://npmjs.org/">npm</a> - Again, package manager version should be fine.
* grunt-cli installed globally
    sudo npm install grunt-cli -g</p>
<h2>Getting Started</h2>
<pre><code>git clone git@github.com:benbreedlove/smokejs.git
cd smokejs/
npm install
grunt serve</code></pre>
<p>We've currently got four example payloads that can be loaded through smoke.
<a href="http://localhost:9001/topic/health_list/">An example topic list</a>
<a href="http://localhost:9001/article/drones">An example article</a>
<a href="http://localhost:9001/author/peter">An example author page</a>
<a href="http://localhost:9001">The homepage</a></p>
<h2>Working on Smoke</h2>
<h3>Important Grunt Commands</h3>
<p>We're using grunt as our task manager. It has a few commands that will make developing on smoke much easier</p>
<h4>grunt lint</h4>
<p>  Runs our linter, <a href="http://www.jshint.com/docs/">jshint</a>, over smoke's Javascript files, over our test's Javascript files, and over the file we use to define our grunt tasks
  If the linter is complaining about something you're sure is okay, jshint can be configured by editing the .jshint file in the location where you want to change the linter configuration. (/js, /test, or /)</p>
<h4>grunt test</h4>
<p>  Runs our tests and gives us a code coverage percent.
  Tests are run using the Mocha Test runner <a href="https://github.com/visionmedia/mocha">https://github.com/visionmedia/mocha</a>
  Asserts are made using the should library <a href="https://github.com/visionmedia/should">https://github.com/visionmedia/should</a>
  Sinon is used for fake server and timing <a href="http://sinonjs.org/docs/">http://sinonjs.org/docs/</a></p>
<pre><code class="lang-Javascript">/*global require */
var api = require('../js/api');
var response = require('./fixtures/article/1.json');
var utils = require('./utils');
var should = require('should');

// describe it before and after are added to the global scope
describe(&quot;component api&quot;, function() {
  describe(&quot;get&quot;, function() {
    var self;
    beforeEach(function() {
      // Runs before each test in self describe
      var self = new Object;
      self.slug = 'test';
      self.server = utils.mock_component(slug, response);
    });
    afterEach(function() {
      // Runs after each test in self describe
      self.server.restore();
    });
    before(function() {
      //Runs once before all tests after self.
    });
    after(function() {
    });
    it(&quot;returns data from mirrors&quot;, function(done) {
      var callback = function(data) {
        //Example of using should off the objects prototype
        data.should.have.property('slug', self.slug);
      };
      var component = new api.Component(self.slug);
      component.get(callback).then(function() {
        //Example of using should w/o extending prototype
        should(component).have.property('metadata');
        //done is an arguement for it or before/after
        //call it on async calls to end the test
        done();
      });
    });
    it(&quot;next test&quot;, function() {
      //
      // Put next test here
      //
    });
  });
});</code></pre>
<h4>grunt serve</h4>
<p>  Spins up a server, at localhost:9001. While serve is running, any changes made to smoke's source Javascript will be automatically browserified and served. Any template changes will be compiled, browserified, and served.
  Sometimes browserification takes a couple seconds, if your changes don't seem to be showing up, check the cli where you're running grunt serve to make sure browserification has finished</p>
<h4>grunt jsdoc</h4>
<p>  Turns our inline documentation into documentation that can be read.
  Hopefully soon we'll have a section on how to add to our documentation</p>
<h3>Adding new templates</h3>
<p>  We are using <a href="http://akdubya.github.io/dustjs/">dust</a> as our templating language.
  We've added 4 functions to dust that might be important to you.
<em> ad <code>{#ad placement=&quot;bottommob&quot; width=&quot;299&quot; /}</code>
  Places an iframed ad to the page. The iframe will automatically resize to the height of the ad. It will not resize the width
  Requires a parameter telling smoke the placement, which it passes along to the ad server.
  You may also find it useful to pass along a width.
</em> load <code>{#load slug=&quot;peter&quot; template=&quot;byline&quot; /}</code>
  Loads a new component from mirrors from a slug.
  Takes a slug parameter, and a template parameter.
  If a template parameter is not given, the component will be rendered with it's schemaName as the template
<em> render <code>{#attributes.byline} {#render template=&quot;byline&quot; /} {/attributes.byline}</code>
  Renders an already loaded component.
  In order to work you must set dust's context to the component you want to render. That's done with the <code>{#attributes.byline}new context is here{/attributes.byline}</code> stuff
  If a template parameter is not given, the component will be rendered with it's schemaName as the template
</em> markdown <code>{#markdown data_uri=&quot;http://mirrors.motherjones.com/component/bengazhi/data&quot; /}</code>
  Turns markdown into html, then runs it through dust templating.
* list <code>{#list attribute=&quot;{string}&quot; template=&quot;{string}&quot; [delimiter=&quot;{string}&quot;] /}</code>
  Renders an attribute list. Handles all the data-attribute stuff you need to make a list sortable</p>
<h3>Making our templates play nice with our inline edit</h3>
<p>  If you want to make a component inline editable, you have to jump through some hoops
<em> Your rendered component must have a contained in an element w/ the id of your component's slug.
  Thats how we know where to look for things that should be inline editable, and where to add the save button.
</em> Your metadata must be contained in an element with the attributes data-slug equal to your component's slug, and data-metadata equal to the metadata's name.
  <code>&lt;h2 data-slug=&quot;{slug}&quot; data-metadata=&quot;dek&quot;&gt;{dek}&lt;/h2&gt;</code>.</p>
<h2>Examples</h2>
<p><em>(Coming soon)</em></p>
<h2>Release History</h2>
<p><em>(Nothing yet)</em></p></article>
    </section>







				</div>

				<div class="clearfix"></div>
				<footer>
					
					
		<span class="copyright">
		MotherJones Copyright Â© 2012-2014
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a>
		on Mon Aug 11th 2014 using the <a
			href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<div class="span3">
				<div id="toc"></div>
			</div>
			
			<br clear="both">
		</div>

	</div>
	<!--<script src="scripts/sunlight.js"></script>-->
	<script src="scripts/docstrap.lib.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>

	<script>
		$( function () {
			$( "[id*='$']" ).each( function () {
				var $this = $( this );

				$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
			} );

			$( "#toc" ).toc( {
				anchorName  : function ( i, heading, prefix ) {
					return $( heading ).attr( "id" ) || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : "100px"
			} );

			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );
			$( '.dropdown-toggle' ).dropdown();
//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

			$( ".tutorial-section pre, .readme-section pre" ).each( function () {
				var $this = $( this );

				var example = $this.find( "code" );
				exampleText = example.html();
				var lang = /{@lang (.*?)}/.exec( exampleText );
				if ( lang && lang[1] ) {
					exampleText = exampleText.replace( lang[0], "" );
					example.html( exampleText );
					lang = lang[1];
				} else {
					lang = "javascript";
				}

				if ( lang ) {

					$this
						.addClass( "sunlight-highlight-" + lang )
						.addClass( "linenums" )
						.html( example.html() );

				}
			} );

			Sunlight.highlightAll( {
				lineNumbers : true,
				showMenu : true,
				enableDoclinks : true
			} );
		} );
	 </script>



	<!--Navigation and Symbol Display-->
	


	<!--Google Analytics-->
	

</body>
</html>