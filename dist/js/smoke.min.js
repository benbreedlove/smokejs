/*! Smoke - v0.1.0 - 2013-05-16
* https://github.com/motherjones/smoke
* Copyright (c) 2013 Mother Jones Tech Team; Licensed MIT */
"use strict";define(["underscore","backbone","dust","nameplate","site_nav","templates"],function(e,t,n,i,r){var o=t.Model.extend({defaults:{current_view:new page_view.HomePageView}}),l=t.View.extend({el:$("body"),render:function(){var e=this;n.render("site_structure",this.model.attributes,function(t,n){t?console.log(t):e.$el.html(n);var o=new i.NameplateView;$("#nameplate",this.el).html(o.render().el);var l=new r.NavModel,c=new r.NavView({model:l});$("#site-nav",this.el).html(c.render().el),this.updateContent()})},updateContent:function(){$("#main-content",this.el).html(model.current_view.render().el)}});return{SiteView:l,SiteState:o}}),function(e){e(["underscore","backbone","dust","module"],function(e,t,n,i){var r=t.Tastypie.Model.extend({defaults:{slug:"fakeslug",hed:"headline",dek:"dek",content:["hellooo above the fold"," anyone home below the fold","other pages"],byline:"by nobody ever"},urlroot:i.config().DATA_STORE+"article/"}),o=t.Tastypie.Collection.extend({model:r,urlroot:i.config().DATA_STORE+"article/"}),l=t.View.extend({tagName:"article",className:"article",render:function(){var e=this;return n.render("article",this.model.attributes,function(t,n){t?console.log(t):e.$el=e.el=n}),this}});return{Article:r,Articles:o,ArticleList:ArticleList,ArticleView:l}})}(define),function(e){e(["underscore","jquery","backbone","dust","module"],function(e,t,n,i,r){var o=n.Tastypie.Model.extend({urlroot:r.config().DATA_STORE+"basecontent/",defaults:{content:"",title:"",link:"",layout:"","class":""}}),l=n.View.extend({initialize:function(){},renderer:"base_content",render:function(){var e=this;return i.render(this.renderer,this.model.attributes,function(t,n){t?console.log(t):e.$el=e.el=n}),this}}),c=n.Tastypie.Collection.extend({model:function(e,t){return new o(e,t)},urlroot:r.config().DATA_STORE+"basecontent/",defaults:{"class":""}}),u=n.View.extend({initialize:function(){},tagName:"div",modelView:l,render:function(n){var i=this;return this.title&&this.$el.append("<h4>"+this.title+"</h4>"),this.$el.append("<ul></ul>"),this.container=t(n),e(this.collection.models).each(function(e){i.appendItem(e)}),this},appendItem:function(e){var n=new this.modelView({model:e});t("ul",this.el).append(n.render().el)}});return{BaseContent:o,BaseContentView:l,BaseContentList:c,BaseContentListView:u}})}(define),function(e){e(["underscore","backbone","article"],function(e,t,n){var i=t.Router.extend({routes:{"article:slug":"display_article"},display_article:function(e){var t=new n.Article({slug:e}),i=new n.ArticleView({model:t});i.$el.show()}}),r=new i;return t.history.start(),{router:r}})}(define),require(["controller","application"],function(e,t){var n=new t.SiteState,i=new t.SiteView({model:n});i.render(),n.on("change:current_view",i.updateContent)}),function(e){e(["underscore","backbone","dust"],function(e,t,n){var i=t.Model.extend({defaults:{title:"Mother Jones",ad_block:"An add or something goes here"}}),r=t.View.extend({initialize:function(){this.model=new i},render:function(){var e=this;return n.render("nameplate",this.model.attributes,function(t,n){t?console.log(t):e.$el=e.el=n}),this}});return{NameplateView:r,NameplateModel:i}})}(define),function(e){e(["underscore","backbone","dust","content","module"],function(e,t,n,i,r){var o=t.Model.extend({defaults:{selected:!1,nav:"sections",ticker:"top"}}),l=t.View.extend({events:{"hover nav a":"swapTicker"},model:o,id:"site-nav",tagName:"div",initialize:function(){this.navCollection=new i.BaseContentList({url:r.config().DATA_STORE+"/topnav/"+this.nav}),this.navView=new i.BaseContentListView({collection:this.navCollection}),this.tickerCollection=new i.BaseContentList({url:r.config().DATA_STORE+"/ticker/"+this.ticker}),this.tickerView=new i.BaseContentListView({collection:this.tickerCollection})},render:function(){var e=this;return n.render("site_nav",this.model.attributes,function(t,n){t?console.log(t):e.$el=e.el=n}),$("#nav",this.el).append(this.navView.render().el),$("#ticker",this.el).append(this.tickerView.render().el),this}});return{NavView:l,NavModel:o}})}(define),function(){function e(e,t){return e.write("<header>").reference(t.get("hed"),t,"h").write("</header><h4>").reference(t.get("dek"),t,"h").write("</h4><p>").reference(t.get("content"),t,"h").write("</p><p>").reference(t.get("byline"),t,"h").write("</p>")}return dust.register("article",e),e}(),function(){function e(e,d){return e.write("<div ").helper("if",d,{block:t},{cond:n}).write(">").helper("if",d,{block:i},{cond:r}).helper("if",d,{block:o},{cond:l}).helper("if",d,{block:c},{cond:u}).helper("if",d,{block:a},{cond:s}).write("</div>")}function t(e,t){return e.write('class="').reference(t.get("class"),t,"h").write('"')}function n(e,t){return e.reference(t.get("class"),t,"h")}function i(e,t){return e.write('<a href="').reference(t.get("link"),t,"h").write('">')}function r(e,t){return e.reference(t.get("link"),t,"h")}function o(e,t){return e.write("<h5>").reference(t.get("title"),t,"h").write("<h5>")}function l(e,t){return e.reference(t.get("title"),t,"h")}function c(e,t){return e.write("<p>").reference(t.get("content"),t,"h").write("<p>")}function u(e,t){return e.reference(t.get("content"),t,"h")}function a(e){return e.write("</a>")}function s(e,t){return e.reference(t.get("link"),t,"h")}return dust.register("base_content",e),e}(),function(){function e(e,t){return e.write('<div class="row full_page_content">').reference(t.get("content"),t,"h").write("</div>")}return dust.register("full_page",e),e}(),function(){function e(e){return e.write('<a class="eight columns" id="site-name" title="Home" rel="home">Mother Jones</a><div class="eight columns">Ad or subscription or whatever stuff here</div>')}return dust.register("nameplate",e),e}(),function(){function e(e){return e.write('<nav id="nav" class="row"></nav><ul id="ticker" class="row"></ul>')}return dust.register("site_nav",e),e}(),function(){function e(e){return e.write('<div class="container"><header id="main-header"><div id="nameplate" class="row"></div><div id="site-nav"></div></header><div id="main-content" class="row"><div id="full-width" class="sixteen columns one-column-layout mojo-column-layout">I am within a full width layout</div><div id="two-column-left" class="eleven columns two-column-layout mojo-column-layout">left column in a two column layout</div><div id="two-column-right" class="five columns two-column-layout mojo-column-layout">right column in a two column layout</div><div id="three-column-left" class="eight columns three-column-layout mojo-column-layout">left column ihn a three column layout</div><div id="three-column-middle" class="three columns three-column-layout mojo-column-layout">middle column in a three column layout</div><div id="three-column-right" class="five columns three-column-layout mojo-column-layout">right column in  athre column layout</div></div><footer id="main-footer" class="row"></footer></div>')}return dust.register("site_structure",e),e}();